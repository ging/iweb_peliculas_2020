(this.webpackJsonppeliculas=this.webpackJsonppeliculas||[]).push([[0],{30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),i=n.n(a),c=n(9),s=n.n(c),o=n(3),u=n(4),l=n(6),p=n(5),d=n(10),h=n(17),j=n(8);var b=Object(j.b)({peliculas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE":return t.movies;case"UPDATE":return e.map((function(e,n){return t.index===n?t.movie:e}));case"CREATE":return[].concat(Object(h.a)(e),[t.movie]);case"DELETE":return e.filter((function(e,n){return n!==t.index}));default:return e}},current:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW":case"EDIT":return t.index;case"MAIN":case"UPDATE":case"NEW":case"CREATE":case"DELETE":case"SAVE":return null;default:return e}},view:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW":case"EDIT":case"NEW":return t.type;case"MAIN":case"UPDATE":case"CREATE":case"DELETE":case"SAVE":return null;default:return e}}}),f=n(11),v=n(2),O=n.n(v),m=n(7);function x(e){return Object(r.jsx)("h1",{children:"Mis Pel\xedculas Favoritas"})}var w=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("div",{className:"movie",children:[Object(r.jsx)("div",{className:"movie-img",children:Object(r.jsx)("img",{className:"show",src:"./"+this.props.miniatura,alt:"miniatura de la pel\xedcula"})}),Object(r.jsx)("div",{className:"title",children:this.props.titulo||Object(r.jsx)("em",{children:"Sin t\xedtulo"})}),Object(r.jsxs)("div",{className:"actions",children:[Object(r.jsx)("button",{className:"show",onClick:this.props.show,children:"ver"}),Object(r.jsx)("button",{className:"edit",onClick:this.props.edit,children:"editar"}),Object(r.jsx)("button",{className:"delete",onClick:this.props.delete,children:"borrar"})]})]})}}]),n}(i.a.Component);function g(e){return Object(r.jsxs)("div",{id:"main",children:[e.peliculas.map((function(t,n){return Object(r.jsx)(w,{edit:function(){return e.edit(n)},show:function(){return e.show(n)},delete:function(){return e.delete(n)},titulo:t.titulo,director:t.director,miniatura:t.miniatura})})),Object(r.jsxs)("div",{className:"actions",children:[Object(r.jsx)("button",{className:"new",onClick:e.newMovie,children:"A\xf1adir"}),Object(r.jsx)("button",{className:"down",onClick:e.download,children:"Download"}),Object(r.jsx)("button",{className:"up",onClick:e.upload,children:"Upload"}),Object(r.jsx)("button",{className:"reset",onClick:e.reset,children:"Reset"})]})]})}function E(e){return Object(r.jsxs)("div",{id:"main",children:[Object(r.jsxs)("p",{children:["La pel\xedcula ",Object(r.jsxs)("b",{children:[" ",e.pelicula.titulo," "]})," fue dirigida por ",Object(r.jsxs)("b",{children:[" ",e.pelicula.director]}),"!"]}),Object(r.jsx)("button",{className:"index",onClick:e.main,children:"Volver"}),"`"]})}var y=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state=Object(f.a)({},r.props.pelicula),r}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{id:"main",children:[Object(r.jsx)("h2",{children:"Editar Pel\xedcula "}),Object(r.jsxs)("div",{className:"field",children:["T\xedtulo ",Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"text",id:"titulo",placeholder:"T\xedtulo",value:this.state.titulo,onChange:function(t){return e.setState({titulo:t.target.value})}})]}),Object(r.jsxs)("div",{className:"field",children:["Director ",Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"text",id:"director",placeholder:"Director",value:this.state.director,onChange:function(t){return e.setState({director:t.target.value})}})]}),Object(r.jsxs)("div",{className:"field",children:["Miniatura ",Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"text",id:"miniatura",placeholder:"URL de la miniatura",value:this.state.miniatura,onChange:function(t){return e.setState({miniatura:t.target.value})}})]}),Object(r.jsxs)("div",{className:"actions",children:[this.props.new?Object(r.jsx)("button",{className:"new",onClick:function(){return e.props.create(e.state)},children:"Crear"}):Object(r.jsx)("button",{className:"update",onClick:function(){return e.props.update(e.state)},children:"Actualizar"}),Object(r.jsx)("button",{className:"index",onClick:this.props.main,children:"Volver"})]})]})}}]),n}(i.a.Component);function N(e){return{type:"SAVE",movies:e}}var k=[{titulo:"Superl\xf3pez",director:"Javier Ruiz Caldera",miniatura:"superlopez.png"},{titulo:"Jurassic Park",director:"Steven Spielberg",miniatura:"jurassicpark.png"},{titulo:"Interstellar",director:"Christopher Nolan",miniatura:"interstellar.png"}],C=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://myjson.dit.upm.es/api/bins",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,a=r.uri,e.abrupt("return",a);case 11:e.prev=11,e.t0=e.catch(0),alert("No se ha podido crear el endpoint.");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(m.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(localStorage.URL);case 3:return t=e.sent,e.abrupt("return",t.json());case 7:e.prev=7,e.t0=e.catch(0),alert("No se ha podido recuperar la informaci\xf3n.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(m.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(localStorage.URL,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),alert("Ha ocurrido un error"),e.abrupt("return");case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),A=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).show=function(e){r.props.dispatch(function(e){return{type:"SHOW",index:e}}(e))},r.main=function(){r.props.dispatch({type:"MAIN"})},r.edit=function(e){r.props.dispatch(function(e){return{type:"EDIT",index:e}}(e))},r.update=function(e){r.props.dispatch(function(e,t){return{type:"UPDATE",index:e,movie:t}}(r.props.current,e))},r.erase=function(e){r.props.dispatch(function(e){return{type:"DELETE",index:e}}(e))},r.newm=function(e){r.props.dispatch({type:"NEW"})},r.create=function(e){r.props.dispatch(function(e){return{type:"CREATE",movie:e}}(e))},r.download=Object(m.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:t=e.sent,r.props.dispatch(N(t));case 4:case"end":return e.stop()}}),e)}))),r.upload=Object(m.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(r.props.peliculas);case 2:case"end":return e.stop()}}),e)}))),r.reset=function(){r.props.dispatch(N(k))},r.state={loading:!0},r}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.current,n=e.peliculas,a=e.view,i="number"===typeof t&&t>=0;return Object(r.jsxs)("div",{className:"root",children:[Object(r.jsx)(x,{}),this.state.loading?Object(r.jsx)("img",{src:"./spinner.gif",className:"spinner",alt:"spinner"}):Object(r.jsxs)("div",{children:[i||a?null:Object(r.jsx)(g,{peliculas:n,show:this.show,edit:this.edit,newMovie:this.newm,delete:this.erase,download:this.download,upload:this.upload,reset:this.reset}),i&&"SHOW"===a?Object(r.jsx)(E,{pelicula:n[t],main:this.main}):null,i&&"EDIT"===a?Object(r.jsx)(y,{pelicula:n[t],main:this.main,update:this.update}):null,i||"NEW"!==a?null:Object(r.jsx)(y,{pelicula:{},main:this.main,create:this.create,new:!0})]})]})}},{key:"componentDidMount",value:function(){var e=Object(m.a)(O.a.mark((function e(){var t=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,localStorage.URL&&"undefined"!==localStorage.URL){e.next=8;break}return e.next=4,C(k);case 4:localStorage.URL=e.sent,this.props.dispatch(N(k)),e.next=10;break;case 8:return e.next=10,this.download();case 10:setTimeout((function(){t.setState({loading:!1})}),2e3),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),alert("ERROR");case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()}]),n}(i.a.Component);var D=Object(d.b)((function(e){return Object(f.a)({},e)}))(A),R=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).initialState={peliculas:[],current:null,view:null},r.store=r.configureStore(),r}return Object(u.a)(n,[{key:"render",value:function(){return Object(r.jsx)(d.a,{store:this.store,children:Object(r.jsx)("div",{style:{height:"100%"},children:Object(r.jsx)(D,{})})})}},{key:"configureStore",value:function(){return Object(j.c)(b,this.initialState)}}]),n}(i.a.Component),L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};n(30);s.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(R,{})}),document.getElementById("root")),L()}},[[31,1,2]]]);
//# sourceMappingURL=main.56f5c465.chunk.js.map